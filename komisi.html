<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Database Penyimpanan Komisi By Indra</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .marquee {
      overflow: hidden;
      position: relative;
      background: linear-gradient(90deg, #1e3a8a, #3b82f6, #9333ea);
      color: #fff;
      font-weight: bold;
      font-size: 1.1rem;
      text-shadow: 0 0 5px rgba(255,255,255,0.6), 0 0 10px rgba(255,255,255,0.4);
      white-space: nowrap;
    }

    .marquee span {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 15s linear infinite;
    }

    @keyframes marquee {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

      .hidden { display: none; }
    #doraemonFace { width: 180px; height: 180px; margin: 0 auto 2rem auto; }
    .eye { fill: white; stroke: #004a7c; stroke-width: 2; transition: all 0.3s ease; transform-origin: center; }
    .pupil { fill: black; transition: all 0.3s ease; }
    .eye.closed { ry: 2 !important; fill: #004a7c !important; stroke-width: 0 !important; }
    .pupil.closed { opacity: 0 !important; }
    #nose { fill: #e60012; transition: transform 0.3s ease; transform-origin: center; }
    .wiggle { animation: wiggle 0.4s ease-in-out 3; }
    @keyframes wiggle {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(15deg); }
      50% { transform: rotate(-15deg); }
      75% { transform: rotate(15deg); }
    }

      .font-pacifico {
      font-family: 'Pacifico', cursive;
    }
  </style>
</head>
  <body class="bg-gradient-to-br from-blue-200 to-indigo-400 min-h-screen">

<!-- === LOGIN SECTION === -->
<section id="authPage" class="flex items-center justify-center py-10 px-4">
  <div class="bg-white rounded-3xl shadow-2xl max-w-5xl w-full p-8 grid grid-cols-1 lg:grid-cols-3 gap-10">
    <!-- Doraemon Face -->
    <div class="lg:col-span-1 flex flex-col items-center">
      <div id="doraemonFace">
        <svg width="180" height="180" viewBox="0 0 180 180">
          <circle cx="90" cy="90" r="85" fill="#00a0de" stroke="#004a7c" stroke-width="4"/>
          <circle cx="90" cy="110" r="65" fill="white"/>
          <circle id="nose" cx="90" cy="85" r="12"/>
          <ellipse id="leftEye" class="eye" cx="60" cy="70" rx="18" ry="25"/>
          <ellipse id="rightEye" class="eye" cx="120" cy="70" rx="18" ry="25"/>
          <circle id="leftPupil" class="pupil" cx="60" cy="80" r="9"/>
          <circle id="rightPupil" class="pupil" cx="120" cy="80" r="9"/>
          <path id="mouth" d="M50 120 Q90 130 130 120" stroke="#a3000a" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <p class="mt-4 text-center text-indigo-800 font-semibold">Login dulu ya ~</p>
    </div>

    <!-- Login Form -->
    <div class="lg:col-span-1 bg-indigo-50 rounded-2xl p-6">
      <h2 class="text-2xl text-center font-semibold text-indigo-700 mb-6">Login</h2>
      <form id="loginForm" class="space-y-4">
        <input type="email" id="loginEmail" placeholder="Email" required class="w-full px-4 py-2 border rounded-lg" />
        <input type="password" id="loginPassword" placeholder="Password" required class="w-full px-4 py-2 border rounded-lg" />
        <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">Login</button>
        <p id="loginErrorMsg" class="text-red-600 text-center hidden">Email atau password salah</p>
      </form>
    </div>
  </div>
</section>

<!-- === MAIN CONTENT (WEBSITE BUCIN) === -->
<section id="mainPage" class="hidden">
  <!-- INI ADALAH HALAMAN WEBSITE BUCIN ASLI KAMU -->
  <div class="max-w-6xl mx-auto bg-white shadow-lg rounded-lg p-6">
    <h1 class="text-2xl font-bold mb-4">Database Komisi</h1>

    <!-- Form Tambah Data -->
    <form id="dataForm" class="grid grid-cols-2 gap-4 mb-6">
      <div class="flex flex-col">
        <label for="nama" class="font-semibold">Nama Konsumen</label>
        <input type="text" id="nama" placeholder="Nama" class="border p-2 rounded" required />
      </div>

      <div class="flex flex-col">
        <label for="nomor" class="font-semibold">Nomor Konsumen</label>
        <input type="text" id="nomor" placeholder="Nomor" class="border p-2 rounded" required />
      </div>

      <div class="flex flex-col">
        <label for="unit" class="font-semibold">Unit Motor</label>
        <select id="unit" class="border p-2 rounded" required>
          <option value="">-- Pilih Unit --</option>
          <option value="Beat CBS">Beat CBS</option>
          <option value="Beat Deluxe">Beat Deluxe</option>
          <option value="Beat Deluxe Smart Key">Beat Deluxe Smart Key</option>
          <option value="Vario 160 CBS">Vario 160 CBS</option>
          <option value="Vario 160 CBS SP">Vario 160 CBS SP</option>
          <option value="Vario 160 ABS">Vario 160 ABS</option>
          <option value="Vario 125 CBS">Vario 125 CBS</option>
          <option value="Vario 125 CBS ISS">Vario 125 CBS ISS</option>
          <option value="Scoopy Prestige">Scoopy Prestige</option>
          <option value="Scoopy Energetik">Scoopy Energetik</option>
          <option value="Scoopy Stylish">Scoopy Stylish</option>
          <option value="Scoopy Fashion">Scoopy Fashion</option>
          <option value="PCX 160 CBS">PCX 160 CBS</option>
          <option value="PCX 160 ABS">PCX 160 ABS</option>
        </select>
      </div>

      <div class="flex flex-col">
        <label for="komisi" class="font-semibold">Komisi (Rp)</label>
        <input type="text" id="komisi" placeholder="Komisi" class="border p-2 rounded" required />
      </div>

      <div class="flex flex-col">
        <label for="tanggalInput" class="font-semibold">Tanggal Input</label>
        <input type="date" id="tanggalInput" class="border p-2 rounded" required />
      </div>

      <div class="flex flex-col">
        <label for="tanggalCair" class="font-semibold">Tanggal Cair</label>
        <input type="date" id="tanggalCair" class="border p-2 rounded" />
      </div>

      <div class="flex flex-col col-span-2">
        <label for="jumlahTf" class="font-semibold">Jumlah TF (Rp, otomatis)</label>
        <input type="text" id="jumlahTf" placeholder="Jumlah TF (otomatis)" class="border p-2 rounded bg-gray-100" readonly />
      </div>

      <button type="submit" class="col-span-2 bg-blue-500 text-white p-2 rounded">Tambah</button>
    </form>

    <!-- Tabel Data -->
    <table class="w-full border text-sm text-center">
      <thead class="bg-gray-200">
        <tr>
          <th class="border p-2">Nama</th>
          <th class="border p-2">Nomor</th>
          <th class="border p-2">Unit</th>
          <th class="border p-2">Komisi</th>
          <th class="border p-2">Jumlah TF</th>
          <th class="border p-2">Tanggal Input</th>
          <th class="border p-2">Tanggal Cair</th>
          <th class="border p-2">Aksi</th>
        </tr>
      </thead>
      <tbody id="dataTable"></tbody>
    </table>

    <!-- Marquee -->
    <div class="marquee fixed bottom-0 left-0 w-full p-2 shadow-lg">
      <span>Website by Indra Yunias Mara | Data ini cuman kesimpan di local storage aja ya | Gunakan dengan bijak ya</span>
    </div>
  </div>

  <!-- Modal Edit -->
  <div id="editModal" class="fixed inset-0 hidden bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white p-6 rounded-lg w-1/2">
      <h2 class="text-xl font-bold mb-4">Edit Data</h2>
      <form id="editForm" class="grid grid-cols-2 gap-4">
        <div class="flex flex-col">
          <label for="editNama" class="font-semibold">Nama Konsumen</label>
          <input type="text" id="editNama" class="border p-2 rounded" required />
        </div>

        <div class="flex flex-col">
          <label for="editNomor" class="font-semibold">Nomor Konsumen</label>
          <input type="text" id="editNomor" class="border p-2 rounded" required />
        </div>

        <div class="flex flex-col">
          <label for="editUnit" class="font-semibold">Unit Motor</label>
          <select id="editUnit" class="border p-2 rounded" required>
            <option value="Beat CBS">Beat CBS</option>
            <option value="Beat Deluxe">Beat Deluxe</option>
            <option value="Beat Deluxe Smart Key">Beat Deluxe Smart Key</option>
            <option value="Vario 160 CBS">Vario 160 CBS</option>
            <option value="Vario 160 CBS SP">Vario 160 CBS SP</option>
            <option value="Vario 160 ABS">Vario 160 ABS</option>
            <option value="Vario 125 CBS">Vario 125 CBS</option>
            <option value="Vario 125 CBS ISS">Vario 125 CBS ISS</option>
            <option value="Scoopy Prestige">Scoopy Prestige</option>
            <option value="Scoopy Energetik">Scoopy Energetik</option>
            <option value="Scoopy Stylish">Scoopy Stylish</option>
            <option value="Scoopy Fashion">Scoopy Fashion</option>
            <option value="PCX 160 CBS">PCX 160 CBS</option>
            <option value="PCX 160 ABS">PCX 160 ABS</option>
          </select>
        </div>

        <div class="flex flex-col">
          <label for="editKomisi" class="font-semibold">Komisi (Rp)</label>
          <input type="text" id="editKomisi" class="border p-2 rounded" required />
        </div>

        <div class="flex flex-col">
          <label for="editTanggalInput" class="font-semibold">Tanggal Input</label>
          <input type="date" id="editTanggalInput" class="border p-2 rounded" required />
        </div>

        <div class="flex flex-col">
          <label for="editTanggalCair" class="font-semibold">Tanggal Cair</label>
          <input type="date" id="editTanggalCair" class="border p-2 rounded" />
        </div>

        <div class="flex flex-col col-span-2">
          <label for="editJumlahTf" class="font-semibold">Jumlah TF (Rp, otomatis)</label>
          <input type="text" id="editJumlahTf" class="border p-2 rounded bg-gray-100" readonly />
        </div>

        <div class="col-span-2 flex justify-end space-x-2">
          <button type="button" id="closeEdit" class="bg-gray-400 text-white px-4 py-2 rounded">Batal</button>
          <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Simpan</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Fungsi format Rupiah
    function formatRupiah(angka) {
      if (!angka) return "";
      return "Rp " + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    function parseRupiah(rp) {
      return Number(rp.replace(/[^0-9]/g, "")) || 0;
    }

    // Ambil data dari LocalStorage
    let dataEntries = JSON.parse(localStorage.getItem("komisiData")) || [];
    let editIndex = null;

    const form = document.getElementById("dataForm");
    const table = document.getElementById("dataTable");
    const editModal = document.getElementById("editModal");
    const editForm = document.getElementById("editForm");

    const komisiInput = document.getElementById("komisi");
    const jumlahTfInput = document.getElementById("jumlahTf");

    komisiInput.addEventListener("input", () => {
      const komisi = parseRupiah(komisiInput.value);
      jumlahTfInput.value = formatRupiah(Math.round(komisi - komisi * 0.025));
      komisiInput.value = formatRupiah(komisi);
    });

    const editKomisiInput = document.getElementById("editKomisi");
    const editJumlahTfInput = document.getElementById("editJumlahTf");

    editKomisiInput.addEventListener("input", () => {
      const komisi = parseRupiah(editKomisiInput.value);
      editJumlahTfInput.value = formatRupiah(Math.round(komisi - komisi * 0.025));
      editKomisiInput.value = formatRupiah(komisi);
    });

    function saveData() {
      localStorage.setItem("komisiData", JSON.stringify(dataEntries));
    }

    function renderTable() {
      table.innerHTML = "";
      dataEntries.forEach((entry, index) => {
        const row = `
          <tr>
            <td class="border p-2">${entry.nama}</td>
            <td class="border p-2">${entry.nomor}</td>
            <td class="border p-2">${entry.unit}</td>
            <td class="border p-2">${formatRupiah(entry.komisi)}</td>
            <td class="border p-2">${formatRupiah(entry.jumlahTf)}</td>
            <td class="border p-2">${entry.tanggalInput}</td>
            <td class="border p-2">${entry.tanggalCair || ""}</td>
            <td class="border p-2 space-x-2">
              <button onclick="editData(${index})" class="bg-yellow-400 px-2 py-1 rounded">Edit</button>
              <button onclick="deleteData(${index})" class="bg-red-500 px-2 py-1 rounded text-white">Hapus</button>
            </td>
          </tr>
        `;
        table.innerHTML += row;
      });
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const nama = document.getElementById("nama").value.trim();
      const nomor = document.getElementById("nomor").value.trim();
      const unit = document.getElementById("unit").value;
      const komisi = parseRupiah(document.getElementById("komisi").value);
      const tanggalInput = document.getElementById("tanggalInput").value;
      const tanggalCair = document.getElementById("tanggalCair").value;
      const jumlahTf = parseRupiah(document.getElementById("jumlahTf").value);

      if (!nama || !nomor || !unit || !komisi || !tanggalInput) {
        alert("Data wajib diisi.");
        return;
      }

      dataEntries.push({ nama, nomor, unit, komisi, jumlahTf, tanggalInput, tanggalCair });
      saveData();
      renderTable();
      form.reset();
      jumlahTfInput.value = "";
    });

    function editData(index) {
      editIndex = index;
      const entry = dataEntries[index];
      document.getElementById("editNama").value = entry.nama;
      document.getElementById("editNomor").value = entry.nomor;
      document.getElementById("editUnit").value = entry.unit;
      document.getElementById("editKomisi").value = formatRupiah(entry.komisi);
      document.getElementById("editTanggalInput").value = entry.tanggalInput;
      document.getElementById("editTanggalCair").value = entry.tanggalCair;
      document.getElementById("editJumlahTf").value = formatRupiah(entry.jumlahTf);
      editModal.classList.remove("hidden");
    }

    editForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const nama = document.getElementById("editNama").value.trim();
      const nomor = document.getElementById("editNomor").value.trim();
      const unit = document.getElementById("editUnit").value;
      const komisi = parseRupiah(document.getElementById("editKomisi").value);
      const tanggalInput = document.getElementById("editTanggalInput").value;
      const tanggalCair = document.getElementById("editTanggalCair").value;
      const jumlahTf = parseRupiah(document.getElementById("editJumlahTf").value);

      if (!nama || !nomor || !unit || !komisi || !tanggalInput) {
        alert("Data wajib diisi.");
        return;
      }

      dataEntries[editIndex] = { nama, nomor, unit, komisi, jumlahTf, tanggalInput, tanggalCair };
      saveData();
      renderTable();
      editModal.classList.add("hidden");
    });

    document.getElementById("closeEdit").addEventListener("click", () => {
      editModal.classList.add("hidden");
    });

    function deleteData(index) {
      if (confirm("Yakin hapus data?")) {
        dataEntries.splice(index, 1);
        saveData();
        renderTable();
      }
    }

    renderTable();
  </script>

    <script>
  const passwordInput = document.getElementById('loginPassword');
  const leftEye = document.getElementById('leftEye');
  const rightEye = document.getElementById('rightEye');
  const leftPupil = document.getElementById('leftPupil');
  const rightPupil = document.getElementById('rightPupil');

  // Doraemon eye animation
  passwordInput.addEventListener('focus', () => {
    leftEye.classList.add('closed');
    rightEye.classList.add('closed');
    leftPupil.classList.add('closed');
    rightPupil.classList.add('closed');
  });

  passwordInput.addEventListener('blur', () => {
    leftEye.classList.remove('closed');
    rightEye.classList.remove('closed');
    leftPupil.classList.remove('closed');
    rightPupil.classList.remove('closed');
  });

  const loginForm = document.getElementById('loginForm');
  const loginError = document.getElementById('loginErrorMsg');

  // Static login data
  const validEmail = "teamkoja@gmail.com";
  const validPassword = "koja123";

  // Login validation
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;

    if (email === validEmail && password === validPassword) {
      document.getElementById('authPage').classList.add('hidden');
      document.getElementById('mainPage').classList.remove('hidden');
    } else {
      loginError.classList.remove('hidden');
    }
  });

    // Form submission handling
    const formLove = document.getElementById('loveMessageForm');
    const thankYouMessage = document.getElementById('thankYouMessage');

    formLove.addEventListener('submit', (e) => {
      e.preventDefault();
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }
      form.reset();
      thankYouMessage.classList.remove('hidden');
      setTimeout(() => {
        thankYouMessage.classList.add('hidden');
      }, 5000);
    });
</script>
    <script>

        const logoutBtn = document.getElementById('logoutBtn');

logoutBtn.addEventListener('click', () => {
  // sembunyikan main page
  document.getElementById('mainPage').classList.add('hidden');
  // tampilkan login page
  document.getElementById('authPage').classList.remove('hidden');
  // optional: reset form login
  document.getElementById('loginForm').reset();
});
</script>
</body>
</html>
