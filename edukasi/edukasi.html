<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drakidsss</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body { 
            font-family: 'Fredoka', sans-serif; 
            background: #0b0e14; 
            color: white;
            overflow-x: hidden;
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .space-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
            background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%);
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.5;
            animation: twinkle var(--duration) infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .astronaut {
            position: fixed;
            width: 80px;
            z-index: -1;
            opacity: 0.6;
            animation: float 20s infinite linear;
            pointer-events: none;
        }

        @keyframes float {
            0% { transform: translate(-100px, 20vh) rotate(0deg); }
            100% { transform: translate(110vw, 80vh) rotate(360deg); }
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
        }

        .neo-btn {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 15px var(--glow-color);
        }
        .neo-btn:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 0 30px var(--glow-color);
        }

        .hidden-section { display: none; }
        
        canvas { border-radius: 20px; cursor: crosshair; }
        
        /* PERBAIKAN LAYER MEWARNAI */
        #img-layer { z-index: 10; background: white; pointer-events: none; } 
        #paint-layer { z-index: 20; background: transparent; mix-blend-mode: multiply; touch-action: none; }

        input[type="range"] {
            accent-color: #3b82f6;
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        .social-icons a {
            font-size: 32px;
            color: white;
            transition: all 0.3s ease;
        }

        .social-icons a.wa:hover { color: #25D366; text-shadow: 0 0 15px #25D366; transform: scale(1.2); }
        .social-icons a.ig:hover { color: #E1306C; text-shadow: 0 0 15px #E1306C; transform: scale(1.2); }
        .social-icons a.tt:hover { color: #00f2ea; text-shadow: 0 0 15px #00f2ea; transform: scale(1.2); }
    </style>
</head>
<body>

    <div class="space-bg" id="star-field"></div>
    <div class="astronaut">üë®‚ÄçüöÄ</div>

    <nav class="p-4 bg-black/40 backdrop-blur-lg flex justify-between items-center sticky top-0 z-50 border-b border-white/10">
        <button onclick="showPage('home')" class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent" style="font-family: 'Orbitron'">DRAKIDSSS</button>
        <div class="bg-blue-600/20 border border-blue-500/50 px-4 py-1 rounded-full text-blue-300 font-bold shadow-[0_0_10px_rgba(59,130,246,0.5)]">
            ‚≠ê <span id="global-score">0</span>
        </div>
    </nav>

    <section id="home" class="p-6 max-w-5xl mx-auto animate__animated animate__fadeIn">
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold mb-2">Misi Antariksa üöÄ</h1>
            <p class="text-blue-300">Pilih modul latihanmu, Kapten!</p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <button onclick="showPage('mewarnai')" class="neo-btn p-8 rounded-[40px] text-white flex flex-col items-center" style="--glow-color: rgba(236,72,153,0.4); background: linear-gradient(135deg, #ec4899, #9d174d)">
                <span class="text-6xl mb-4">üé®</span>
                <h2 class="font-bold text-xl uppercase tracking-widest">Mewarnai</h2>
            </button>
            <button onclick="showPage('kuis-sd')" class="neo-btn p-8 rounded-[40px] text-white flex flex-col items-center" style="--glow-color: rgba(34,197,94,0.4); background: linear-gradient(135deg, #22c55e, #15803d)">
                <span class="text-6xl mb-4">üè´</span>
                <h2 class="font-bold text-xl uppercase tracking-widest">Kuis SD</h2>
            </button>
            <button onclick="showPage('kuis-smp')" class="neo-btn p-8 rounded-[40px] text-white flex flex-col items-center" style="--glow-color: rgba(59,130,246,0.4); background: linear-gradient(135deg, #3b82f6, #1d4ed8)">
                <span class="text-6xl mb-4">üéí</span>
                <h2 class="font-bold text-xl uppercase tracking-widest">Kuis SMP</h2>
            </button>
            <button onclick="showPage('kuis-sma')" class="neo-btn p-8 rounded-[40px] text-white flex flex-col items-center" style="--glow-color: rgba(249,115,22,0.4); background: linear-gradient(135deg, #f97316, #c2410c)">
                <span class="text-6xl mb-4">üéì</span>
                <h2 class="font-bold text-xl uppercase tracking-widest">Kuis SMA</h2>
            </button>
        </div>
    </section>

    <section id="mewarnai" class="hidden-section p-4 animate__animated animate__zoomIn">
        <div class="max-w-2xl mx-auto glass-card p-6 border-blue-500/30">
            <div class="flex gap-4 mb-6">
                <button onclick="showPage('home')" class="bg-white/10 hover:bg-white/20 px-4 py-2 rounded-xl text-xl">üè†</button>
                <select id="char-select" onchange="loadChar(this.value)" class="flex-1 bg-black/50 border border-white/20 px-4 py-2 rounded-xl font-bold text-blue-300 outline-none">
                    <option value="labubu">Labubu 1</option>
                    <option value="labubu2">Labubu 2</option>
                    <option value="spongebob">Spongebob</option>
                    <option value="hellokitty">Hello Kitty</option>
                    <option value="sonic">Sonic</option>
                </select>
                <button onclick="downloadImage()" class="bg-blue-500 hover:bg-blue-400 px-6 py-2 rounded-xl font-bold shadow-lg">SIMPAN</button>
            </div>
            
            <div class="relative w-[320px] h-[320px] sm:w-[450px] sm:h-[450px] mx-auto overflow-hidden rounded-3xl border-4 border-blue-500/50 shadow-[0_0_30px_rgba(59,130,246,0.3)]">
                <canvas id="img-layer" width="500" height="500" class="absolute inset-0 w-full h-full"></canvas>
                <canvas id="paint-layer" width="500" height="500" class="absolute inset-0 w-full h-full"></canvas>
            </div>

            <div class="mt-8 flex flex-col gap-6">
                <div class="flex items-center gap-4 bg-black/30 p-4 rounded-2xl">
                    <span class="text-sm font-bold text-blue-300">KUAS:</span>
                    <input type="range" id="brush-size" min="5" max="50" value="20" class="flex-1">
                    <button onclick="toggleEraser()" id="eraser-btn" class="bg-white/10 p-3 rounded-xl border border-transparent hover:border-blue-500 transition">üßΩ</button>
                </div>

                <div class="flex flex-wrap justify-center gap-3">
                    <button onclick="setColor('#ff0000')" class="w-9 h-9 rounded-full bg-[#ff0000] shadow-[0_0_10px_#ff0000]"></button>
                    <button onclick="setColor('#ff7300')" class="w-9 h-9 rounded-full bg-[#ff7300] shadow-[0_0_10px_#ff7300]"></button>
                    <button onclick="setColor('#ffff00')" class="w-9 h-9 rounded-full bg-[#ffff00] shadow-[0_0_10px_#ffff00]"></button>
                    <button onclick="setColor('#00ff00')" class="w-9 h-9 rounded-full bg-[#00ff00] shadow-[0_0_10px_#00ff00]"></button>
                    <button onclick="setColor('#00ffff')" class="w-9 h-9 rounded-full bg-[#00ffff] shadow-[0_0_10px_#00ffff]"></button>
                    <button onclick="setColor('#0099ff')" class="w-9 h-9 rounded-full bg-[#0099ff] shadow-[0_0_10px_#0099ff]"></button>
                    <button onclick="setColor('#0000ff')" class="w-9 h-9 rounded-full bg-[#0000ff] shadow-[0_0_10px_#0000ff]"></button>
                    <button onclick="setColor('#8000ff')" class="w-9 h-9 rounded-full bg-[#8000ff] shadow-[0_0_10px_#8000ff]"></button>
                    <button onclick="setColor('#ff00ff')" class="w-9 h-9 rounded-full bg-[#ff00ff] shadow-[0_0_10px_#ff00ff]"></button>
                    <button onclick="setColor('#ffb6c1')" class="w-9 h-9 rounded-full bg-[#ffb6c1]"></button>
                    <button onclick="setColor('#ffffff')" class="w-9 h-9 rounded-full bg-white border border-gray-400"></button>
                    <button onclick="setColor('#000000')" class="w-9 h-9 rounded-full bg-black border border-white/30"></button>
                    <!-- WARNA CERAH -->
    <button onclick="setColor('#ff0000')" class="w-9 h-9 rounded-full bg-[#ff0000] shadow-[0_0_10px_#ff0000]"></button>
    <button onclick="setColor('#ff7300')" class="w-9 h-9 rounded-full bg-[#ff7300] shadow-[0_0_10px_#ff7300]"></button>
    <button onclick="setColor('#ffff00')" class="w-9 h-9 rounded-full bg-[#ffff00] shadow-[0_0_10px_#ffff00]"></button>
    <button onclick="setColor('#00ff00')" class="w-9 h-9 rounded-full bg-[#00ff00] shadow-[0_0_10px_#00ff00]"></button>
    <button onclick="setColor('#00ffff')" class="w-9 h-9 rounded-full bg-[#00ffff] shadow-[0_0_10px_#00ffff]"></button>
    <button onclick="setColor('#0099ff')" class="w-9 h-9 rounded-full bg-[#0099ff] shadow-[0_0_10px_#0099ff]"></button>
    <button onclick="setColor('#0000ff')" class="w-9 h-9 rounded-full bg-[#0000ff] shadow-[0_0_10px_#0000ff]"></button>
    <button onclick="setColor('#8000ff')" class="w-9 h-9 rounded-full bg-[#8000ff] shadow-[0_0_10px_#8000ff]"></button>
    <button onclick="setColor('#ff00ff')" class="w-9 h-9 rounded-full bg-[#ff00ff] shadow-[0_0_10px_#ff00ff]"></button>

    <!-- WARNA PASTEL -->
    <button onclick="setColor('#ffb6c1')" class="w-9 h-9 rounded-full bg-[#ffb6c1]"></button>
    <button onclick="setColor('#ffd580')" class="w-9 h-9 rounded-full bg-[#ffd580]"></button>
    <button onclick="setColor('#c1f0c1')" class="w-9 h-9 rounded-full bg-[#c1f0c1]"></button>
    <button onclick="setColor('#add8e6')" class="w-9 h-9 rounded-full bg-[#add8e6]"></button>
    <button onclick="setColor('#e6ccff')" class="w-9 h-9 rounded-full bg-[#e6ccff]"></button>

    <!-- WARNA GELAP -->
    <button onclick="setColor('#8b0000')" class="w-9 h-9 rounded-full bg-[#8b0000]"></button>
    <button onclick="setColor('#006400')" class="w-9 h-9 rounded-full bg-[#006400]"></button>
    <button onclick="setColor('#00008b')" class="w-9 h-9 rounded-full bg-[#00008b]"></button>
    <button onclick="setColor('#4b0082')" class="w-9 h-9 rounded-full bg-[#4b0082]"></button>

    <!-- HITAM & PUTIH -->
    <button onclick="setColor('#ffffff')" class="w-9 h-9 rounded-full bg-white border border-gray-400"></button>
    <button onclick="setColor('#000000')" class="w-9 h-9 rounded-full bg-black border border-white/30"></button>

                    <button onclick="clearPaint()" class="px-4 py-2 rounded-xl border-2 border-red-500 text-red-400 font-bold hover:bg-red-500/10">RESET</button>
                </div>
            </div>
        </div>
    </section>

    <section id="quiz-box" class="hidden-section p-6 animate__animated animate__fadeInUp">
        <div id="quiz-card" class="max-w-2xl mx-auto glass-card p-8 sm:p-12 border-t-[10px] shadow-[0_0_50px_rgba(0,0,0,0.5)]">
            <div class="flex justify-between items-center mb-8">
                <h2 id="quiz-title" class="text-2xl font-bold tracking-tighter" style="font-family: 'Orbitron'">SELAMAT MENGERJAKAN</h2>
                <div id="timer-text" class="text-xl font-mono text-blue-400">00s</div>
            </div>
            <div class="h-2 bg-white/10 rounded-full overflow-hidden mb-10">
                <div id="timer-bar" class="h-full bg-blue-500 shadow-[0_0_15px_#3b82f6] transition-all duration-1000"></div>
            </div>
            <div id="q-text" class="text-2xl font-bold mb-10 text-center leading-relaxed">...</div>
            <div id="q-grid" class="grid grid-cols-1 gap-4"></div>
            <div class="mt-12 flex gap-4">
                <button onclick="nextQuestion()" class="flex-1 bg-white/10 py-4 rounded-2xl font-bold hover:bg-white/20 transition">GANTI SOAL</button>
                <button onclick="surrender()" class="flex-1 border border-red-500/50 text-red-400 py-4 rounded-2xl font-bold hover:bg-red-500/10 transition">MENYERAH</button>
            </div>
        </div>
    </section>

    <footer class="border-t border-white/10 py-6 mt-auto text-center">
        <div class="social-icons mb-4">
            <a href="https://wa.me/6283849997221" target="_blank" class="wa"><i class="fa-brands fa-whatsapp"></i></a>
            <a href="https://www.instagram.com/asmarabot?igsh=MXNnMno5Njlqbjlneg==" target="_blank" class="ig"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@apaan_oy?_r=1&_t=ZS-94M84spItLr" target="_blank" class="tt"><i class="fa-brands fa-tiktok"></i></a>
        </div>
        <p class="text-sm text-gray-400">¬© 2026 - Indra<br>website ini dalam masa pengembangan, apabila ada bug atau error harap hubungi admin saja</p>
    </footer>

    <script>
        function createStars() {
            const field = document.getElementById('star-field');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3 + 'px';
                star.style.width = size; star.style.height = size;
                star.style.left = Math.random() * 100 + 'vw';
                star.style.top = Math.random() * 100 + 'vh';
                star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                field.appendChild(star);
            }
        }
        createStars();

        const bank = {
            sd: [
                { q: "Apa lambang sila ke-3 Pancasila?", a: "Pohon Beringin", opt: ["Bintang", "Rantai", "Pohon Beringin", "Kepala Banteng"] },
                { q: "5 x 5 berapa...", a: "25", opt: ["15", "25", "34", "20"] },
                { q: "Planet terdekat dari Matahari?", a: "Merkurius", opt: ["Bumi", "Mars", "Merkurius", "Venus"] }
            ],
            smp: [
                { q: "Rumus luas lingkaran adalah...", a: "œÄ x r¬≤", opt: ["2 x œÄ x r", "œÄ x r¬≤", "p x l", "1/2 x a x t"] },
                { q: "Zat hijau daun disebut...", a: "Klorofil", opt: ["Enzim", "Klorofil", "Stomata", "Oksigen"] }
            ],
            sma: [
                { q: "Siapa Presiden Indonesia ke-3?", a: "B.J. Habibie", opt: ["Gus Dur", "B.J. Habibie", "Megawati", "Soeharto"] },
                { q: "Senyawa kimia garam dapur adalah...", a: "NaCl", opt: ["H2O", "CO2", "NaCl", "NaOH"] }
            ]
        };

       // 1. UPDATE URL GAMBAR (Gunakan link yang lebih bersahabat dengan canvas)
const charImages = {
    labubu: 'https://i.ibb.co.com/yn07Wdsv/labubu2.jpg',
    spongebob: 'https://i.ibb.co.com/GQKdPH2F/spongebob.jpg',
    sonic: 'https://i.ibb.co.com/3yTvL9mY/sonic.jpg',
    hellokitty: 'https://i.ibb.co.com/wZ8Lb3sx/kitty.jpg',
    labubu2: 'https://i.ibb.co.com/8D66qfn7/labubu.jpg'
};

// 2. PERBAIKI FUNGSI LOADCHAR
function loadChar(key) {
    const img = new Image();
    // Tambahkan ini agar gambar diizinkan muncul di canvas
    img.crossOrigin = "anonymous"; 
    img.src = charImages[key];

    img.onload = () => {
        // Bersihkan layer gambar dan layer warna
        iCtx.clearRect(0, 0, iCanvas.width, iCanvas.height);
        pCtx.clearRect(0, 0, pCanvas.width, pCanvas.height);

        // Hitung skala agar gambar pas di kotak (tidak gepeng)
        const scale = Math.min(iCanvas.width / img.width, iCanvas.height / img.height);
        const x = (iCanvas.width / 2) - (img.width / 2) * scale;
        const y = (iCanvas.height / 2) - (img.height / 2) * scale;

        iCtx.drawImage(img, x, y, img.width * scale, img.height * scale);
    };

    img.onerror = () => {
        console.error("Gagal memuat gambar: " + img.src);
        alert("Yah, koneksi internetmu sepertinya lambat atau gambar diblokir. Coba ganti karakter lain!");
    };
}
        let currentLevel = 'sd', qIdx = 0, timerInterval, score = 0;
        let pCanvas, pCtx, iCanvas, iCtx, painting = false, currentColor = '#ff0055', isEraser = false;

        function showPage(id) {
            clearInterval(timerInterval);
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden-section'));
            if(id.startsWith('kuis-')) {
                currentLevel = id.replace('kuis-', ''); qIdx = 0;
                document.getElementById('quiz-box').classList.remove('hidden-section'); setupQuiz();
            } else {
                document.getElementById(id).classList.remove('hidden-section');
                if(id === 'mewarnai') initMewarnai();
            }
        }

        function initMewarnai() {
            pCanvas = document.getElementById('paint-layer'); pCtx = pCanvas.getContext('2d');
            iCanvas = document.getElementById('img-layer'); iCtx = iCanvas.getContext('2d');
            loadChar(document.getElementById('char-select').value);

            const getPos = (e) => {
                const rect = pCanvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                return {
                    x: (clientX - rect.left) * (pCanvas.width / rect.width),
                    y: (clientY - rect.top) * (pCanvas.height / rect.height)
                };
            };

            const start = (e) => { painting = true; draw(e); };
            const stop = () => { painting = false; pCtx.beginPath(); };
            const draw = (e) => {
                if(!painting) return;
                const pos = getPos(e);
                pCtx.lineWidth = document.getElementById('brush-size').value;
                pCtx.lineCap = 'round';
                pCtx.globalCompositeOperation = isEraser ? 'destination-out' : 'source-over';
                pCtx.strokeStyle = currentColor;
                pCtx.lineTo(pos.x, pos.y);
                pCtx.stroke();
                pCtx.beginPath();
                pCtx.moveTo(pos.x, pos.y);
            };

            pCanvas.onmousedown = start; pCanvas.onmouseup = stop; pCanvas.onmousemove = draw;
            pCanvas.addEventListener('touchstart', (e) => { e.preventDefault(); start(e); }, {passive: false});
            pCanvas.addEventListener('touchend', stop);
            pCanvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); }, {passive: false});
        }

        function loadChar(key) {
            const img = new Image();
            img.crossOrigin = "anonymous";
            img.src = charImages[key];
            img.onload = () => {
                iCtx.clearRect(0, 0, 500, 500);
                pCtx.clearRect(0, 0, 500, 500);
                iCtx.drawImage(img, 0, 0, 500, 500);
            };
        }

        function setColor(c) { isEraser = false; currentColor = c; document.getElementById('eraser-btn').style.borderColor = "transparent"; }
        function toggleEraser() { isEraser = !isEraser; document.getElementById('eraser-btn').style.borderColor = isEraser ? "#3b82f6" : "transparent"; }
        function clearPaint() { pCtx.clearRect(0, 0, 500, 500); }

        function downloadImage() {
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = 500; tempCanvas.height = 500;
            const tempCtx = tempCanvas.getContext('2d');
            tempCtx.fillStyle = "white";
            tempCtx.fillRect(0,0,500,500);
            tempCtx.drawImage(iCanvas, 0, 0);
            tempCtx.globalCompositeOperation = 'multiply';
            tempCtx.drawImage(pCanvas, 0, 0);
            const link = document.createElement('a');
            link.download = 'ig: asmarabot.png';
            link.href = tempCanvas.toDataURL();
            link.click();
        }

        function setupQuiz() {
            const card = document.getElementById('quiz-card');
            const timerWrap = document.getElementById('timer-bar').parentElement;
            if(currentLevel === 'sd') { card.style.borderColor = "#22c55e"; timerWrap.style.display = "none"; loadQuiz(); }
            else { 
                const sec = currentLevel === 'smp' ? 60 : 40; 
                card.style.borderColor = currentLevel === 'smp' ? "#3b82f6" : "#f97316"; 
                timerWrap.style.display = "block"; startTimer(sec); 
            }
        }

        function startTimer(seconds) {
            loadQuiz();
            let timeLeft = seconds;
            const bar = document.getElementById('timer-bar');
            const text = document.getElementById('timer-text');
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                text.innerText = timeLeft + "s";
                bar.style.width = (timeLeft / seconds * 100) + "%";
                if(timeLeft <= 0) { clearInterval(timerInterval); alert("WAKTU HABIS!"); nextQuestion(); }
            }, 1000);
        }

        function loadQuiz() {
            const data = bank[currentLevel][qIdx];
            document.getElementById('q-text').innerText = data.q;
            const grid = document.getElementById('q-grid');
            grid.innerHTML = '';
            data.opt.forEach(o => {
                const b = document.createElement('button');
                b.className = "p-5 bg-white/5 border border-white/10 rounded-2xl font-bold hover:bg-blue-500/20 hover:border-blue-500 transition text-left";
                b.innerText = o;
                b.onclick = () => {
                    if(o === data.a) { 
                        confetti({ particleCount: 150, spread: 100, colors: ['#3b82f6', '#00ffcc', '#ffffff'] });
                        score += 10; document.getElementById('global-score').innerText = score; 
                        nextQuestion(); 
                    } else {
                        b.classList.add('animate__animated', 'animate__shakeX', 'border-red-500');
                        setTimeout(() => b.classList.remove('animate__shakeX'), 500);
                    }
                };
                grid.appendChild(b);
            });
        }

        function nextQuestion() {
            qIdx = (qIdx + 1) % bank[currentLevel].length;
            if(currentLevel === 'sd') loadQuiz(); else startTimer(currentLevel === 'smp' ? 60 : 40);
        }

        function surrender() { alert("Kunci jawaban: " + bank[currentLevel][qIdx].a); showPage('home'); }
    </script>
</body>
</html>
